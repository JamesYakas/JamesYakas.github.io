var delObjectId;function onPageLoad(){document.getElementById("myTable").innerHTML="",tbl=document.getElementById("myTable"),document.createElement("BUTTON").innerHTML="CLICK ME";var e=Backendless.DataQueryBuilder.create();e.setPageSize(100).setOffset(0),Backendless.Data.of("Users").find(e).then(function(e){var t;console.log(e);var n=e.length;for(t=0;t<n;t++)addRow(tbl,e[t].email,e[t].userStatus,"edit","delete_forever",e[t].objectId,e[t].objectId,"update","delete",e[t].objectId,e[t].objectId)}).catch(function(e){console.log(e)})}function addCell(e,t,n){var a=document.createElement("td");a.id=n,a.innerHTML=t,e.appendChild(a)}function addCellRight(e,t,n,a){var o=document.createElement("td");o.classList.add("right-align");var s=document.createElement("BUTTON");s.classList.add("waves-effect"),s.classList.add("waves-light"),s.classList.add("btn-small"),s.classList.add("material-icons"),s.innerHTML=t,"delete_forever"==s.innerHTML?(s.classList.add("red"),s.classList.add("lighten-2")):(s.classList.add("green"),s.classList.add("lighten-2")),s.id=n,s.name=a,o.appendChild(s),e.appendChild(o)}function addRow(e,t,n,a,o,s,d,i,l,c,r){var m=document.createElement("tr");m.id=s,addCell(m,t,s),addCell(m,n,d),addCellRight(m,a,i,c),addCellRight(m,o,l,r),e.appendChild(m)}function addBtn(e){var t=document.createElement("BUTTON");t.innerHTML="CLICK ME",e.appendChild(t)}function registerAdmin(){console.log("Register Admin");var e=document.getElementById("user_email").value.trim(),t=document.getElementById("user_passw").value,n=document.getElementById("confirm_pass").value;if(!(""==e||""==t||t!=n||t.length<8)&&t.match(/.*[A-Z].*/)&&t.match(/.*\d.*/)&&1!=/\s/.test(t)){var a=new Backendless.User;return a.email=e,a.password=t,Backendless.UserService.register(a).then(function(e){onPageLoad(),console.log("user has been registered"),toastNotification("Admin created successfully!","toast-tick","white-check-mark.png","light-blue darken-2",4e3,"#0277bd")}).catch(function(e){toastNotification(e.message,"toast-error","error-symbol.png","red lighten-1","Infinity","#ce5548"),console.log("error code - "+e.statusCode)})}var o="";""==e&&(o+='"Email" is required!<br>'),""==t&&(o+='"Password" is required!<br>'),t.length<8&&(o+='"Password" must be at least 8 characters!<br>'),""==t||t.match(/.*[A-Z].*/)||(o+="Password requires at least 1 uppercase character!<br>"),""==t||t.match(/.*\d.*/)||(o+="Password requires at least 1 number!<br>"),""!=t&&t!=n&&(o+="Passwords don't match!<br>"),1==/\s/.test(t)&&(o+="Password cannot contain spaces!<br>"),toastNotification(o,"toast-error","error-symbol.png","red lighten-1","Infinity","#ce5548")}function logoutUser(){localStorage.setItem("userStatus","logged_out"),console.log("logged_out"),window.location.href="../admin.html"}function toastNotification(e,t,n,a,o,s){M.toast({html:'<div class="toast-side"></div><div class="toast-notification-con"><img class="'+t+'" src="../images/'+n+'"><div class="toast-message">'+e+'</div><img class="toast-close" src="../images/toast-close.png" height="16" width="16"></div>',displayLength:o,classes:""+a}),$(".toast-side").css({"background-color":s}),$(document).on("click",".toast-close",function(){$("#toast-container .toast").fadeOut(500,function(){$("#toast-container .toast").remove()})})}Backendless.serverURL="https://api.backendless.com",Backendless.initApp("073669A8-CCB7-2AED-FFEC-841A4CE5F400","FAFDE171-5308-49CF-9980-AA89E4F28F0C"),document.addEventListener("DOMContentLoaded",function(){onPageLoad();const e=localStorage.getItem("currentUser");console.log(e),document.getElementById("userEmail").innerHTML="Hi, "+e;var t=document.querySelectorAll(".fixed-action-btn");M.FloatingActionButton.init(t),t=document.querySelectorAll(".modal"),M.Modal.init(t)}),registerAdminBtn.addEventListener("click",e=>{M.Toast.dismissAll()}),$(document).on("click","#update",function(){}),modalDeleteAdminConfirm.addEventListener("click",e=>(console.log("delete admin"),Backendless.Data.of("Users").remove({objectId:delObjectId}).then(function(e){onPageLoad(),console.log(e),console.log("User deleted"),toastNotification("Admin deleted successfully!","toast-tick","white-check-mark.png","light-blue darken-2",4e3,"#0277bd")}).catch(function(e){toastNotification(e,"toast-error","error-symbol.png","red lighten-1","Infinity","#ce5548")}))),$(document).on("click","#delete",function(){const e=document.getElementById("modal2");M.Modal.init(e,{dismissible:!0}).open();var t=$(this).attr("name");console.log(t);var n=$("#"+t).find("td:first").text();document.getElementById("modalDeleteAdminMessage").innerHTML="Do you want to delete the selected Admin? <br><br><b>"+n+"</b>",console.log(n),delObjectId=t});