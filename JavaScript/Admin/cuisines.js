var queryObjectId;function onPageLoad(){var e=document.getElementById("myTable");e.innerHTML="",e=document.getElementById("myTable");var t=Backendless.DataQueryBuilder.create();return t.setSortBy(["Name"]),t.setPageSize(100).setOffset(0),Backendless.Data.of("Cuisine").find(t).then(function(t){var n;console.log(t);var o=t.length;for(n=0;n<o;n++)addRow(e,t[n].Name,"edit","delete_forever",t[n].objectId,"update","delete",t[n].objectId,t[n].objectId);console.log("10. onPageLoad() complete")}).catch(function(e){console.log(e),toastNotification(e.message,"toast-error","error-symbol.png","red lighten-1","Infinity","#ce5548")})}function addCell(e,t,n){var o=document.createElement("td");o.id=n,o.innerHTML=t,e.appendChild(o)}function addCellRight(e,t,n,o){var a=document.createElement("td");a.classList.add("right-align");var i=document.createElement("BUTTON");i.classList.add("waves-effect"),i.classList.add("waves-light"),i.classList.add("btn-small"),i.classList.add("material-icons"),i.innerHTML=t,"delete_forever"==i.innerHTML?(i.classList.add("red"),i.classList.add("lighten-2")):(i.classList.add("green"),i.classList.add("lighten-2")),i.id=n,i.name=o,a.appendChild(i),e.appendChild(a)}function addRow(e,t,n,o,a,i,s,c,d){var l=document.createElement("tr");l.id=a,addCell(l,t,a),addCellRight(l,n,i,c),addCellRight(l,o,s,d),e.appendChild(l)}function addCuisine(){if(!(""==(e=document.getElementById("add_cuisine").value.trim())||e.length>20||""!=e&&!e.match(/^[A-Za-z]+$/))){var e={Name:e};return Backendless.Data.of("Cuisine").save(e).then(()=>onPageLoad()).then(()=>{console.log("11. Notification sent"),toastNotification("Cuisine has been created successfully!","toast-tick","white-check-mark.png","light-blue darken-2",4e3,"#0277bd"),document.getElementById("add_cuisine").value=""}).catch(function(t){t.message=="Duplicate value '"+e.Name+"' for column 'Name'"?toastNotification("Cuisine with the name '"+e.Name+"' already exists.","toast-error","error-symbol.png","red lighten-1","Infinity","#ce5548"):(console.log("an error has occurred "+t.message),console.log("Duplicate value '"+e.Name+"' for column 'Name'"),toastNotification(t.message,"toast-error","error-symbol.png","red lighten-1","Infinity","#ce5548"))})}var t="";""==e&&(t+='"Cuisine" is required!<br>'),e.length>20&&(t+='"Cuisine" must be less than 20 characters!<br>'),""==e||e.match(/^[A-Za-z]+$/)||(t+='"Cuisine" contains non-alphabetic characters!<br>'),toastNotification(t,"toast-error","error-symbol.png","red lighten-1","Infinity","#ce5548")}function toastNotification(e,t,n,o,a,i){M.toast({html:'<div class="toast-side"></div><div class="toast-notification-con"><img class="'+t+'" src="../images/'+n+'"><div class="toast-message">'+e+'</div><img class="toast-close" src="../images/toast-close.png" height="16" width="16"></div>',displayLength:a,classes:""+o}),$(".toast-side").css({"background-color":i}),$(document).on("click",".toast-close",function(){$("#toast-container .toast").fadeOut(500,function(){$("#toast-container .toast").remove()})})}function logoutUser(){localStorage.setItem("userStatus","logged_out"),console.log("logged_out"),window.location.href="../admin.html"}Backendless.serverURL="https://api.backendless.com",Backendless.initApp("073669A8-CCB7-2AED-FFEC-841A4CE5F400","FAFDE171-5308-49CF-9980-AA89E4F28F0C"),document.addEventListener("DOMContentLoaded",function(){onPageLoad();const e=localStorage.getItem("currentUser");console.log(e),document.getElementById("userEmail").innerHTML="Hi, "+e;var t=document.querySelectorAll(".fixed-action-btn");M.FloatingActionButton.init(t),t=document.querySelectorAll(".modal"),M.Modal.init(t)}),addCuisineBtn.addEventListener("click",e=>{M.Toast.dismissAll()}),modalAddCuisineCancel.addEventListener("click",e=>{document.getElementById("add_cuisine").value=""}),$(document).on("click","#delete",function(){M.Toast.dismissAll();const e=document.getElementById("modal2");M.Modal.init(e,{dismissible:!0}).open();var t=$(this).attr("name");console.log(t);var n=$("#"+t).find("td:first").text();document.getElementById("modalDeleteCuisineMessage").innerHTML="Do you want to delete the selected Cuisine? <br><br><b>"+n+"</b>",console.log(n),queryObjectId=t,console.log(queryObjectId)}),modalDeleteCuisineConfirm.addEventListener("click",e=>(console.log(queryObjectId),Backendless.Data.of("Cuisine").remove({objectId:queryObjectId}).then(()=>onPageLoad()).then(()=>{console.log("11. Notification sent"),toastNotification("Cuisine deleted successfully!","toast-tick","white-check-mark.png","light-blue darken-2",4e3,"#0277bd")}).catch(function(e){toastNotification(e,"toast-error","error-symbol.png","red lighten-1","Infinity","#ce5548")}))),$(document).on("click","#update",function(){M.Toast.dismissAll();const e=document.getElementById("modal3");M.Modal.init(e,{dismissible:!0}).open();var t=$(this).attr("name");console.log(t);var n=$("#"+t).find("td:first").text();document.getElementById("update_cuisine").value=n,console.log(n),M.updateTextFields(),queryObjectId=t,console.log(queryObjectId)}),modalUpdateCuisineConfirm.addEventListener("click",e=>{console.log(queryObjectId);var t=$("#"+queryObjectId).find("td:first").text(),n=document.getElementById("update_cuisine").value.trim();if(!(""==n||n.length>20||""!=n&&!n.match(/^[A-Za-z]+$/)||n==t)){var o={Name:n,objectId:queryObjectId};return Backendless.Data.of("Cuisine").save(o).then(()=>onPageLoad()).then(()=>{console.log("11. Notification sent"),toastNotification("Cuisine updated successfully!","toast-tick","white-check-mark.png","light-blue darken-2",4e3,"#0277bd")}).catch(function(e){toastNotification(e,"toast-error","error-symbol.png","red lighten-1","Infinity","#ce5548")})}var a="";""==n&&(a+='"Cuisine" is required!<br>'),n.length>20&&(a+='"Cuisine" must be less than 20 characters!<br>'),""==n||n.match(/^[A-Za-z]+$/)||(a+='"Cuisine" contains non-alphabetic characters!<br>'),n!=t&&toastNotification(a,"toast-error","error-symbol.png","red lighten-1","Infinity","#ce5548")});